<!DOCTYPE HTML>
<html>

<head>
  <meta charset="UTF-8">
  <script src="main.js">
  </script>
</head>

<body>
  <script>
    const storedData = localStorage.getItem('dm6-elm')
    const model = storedData ? JSON.parse(storedData) : null

    /* make app global so injected prod script can see it */
    window.app = Elm.Main.init({ flags: model })

    app.ports.store?.subscribe(function (model) {
      localStorage.setItem('dm6-elm', JSON.stringify(model))
    })

    /* no log port subscription here â€” dev remains clean */
  </script>

</body>

</html>